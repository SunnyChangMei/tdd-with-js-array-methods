<script src="../simpletest.js"></script>
<script>

// Docs:
  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf

// Specs:
  // https://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.14

// Description:
  // The indexOf() method returns the first index at which
  // a given element can be found in the array, or -1 if it is not present.


// The Steps
  // 1 write requirements based on docs
  // 2 write description for test
  // 3 write test to fail
  // 4 write code to make the test pass
  // 5 repeat

// Function Signature:
  // indexOf(array, searchElement[, fromIndex])


// Parameters:
  // originalArray
    // the array to be searched
  // searchElement
    // the element to locate in the array.
  // fromIndex
    // the index to start the search at.


// Return Value:
  // The first index of the element in the array; -1 if not found.


// Requirements:
  // It should be a type of function.
  // It should accept originalArray as an array as its first argument.
  // It should accept searchElement as a string for its second argument.
  // It should accept searchElement as a number for its second argument.
  // It should accept searchElement as a boolean for its second argument.
  // It should accept searchElement as an array for its second argument.
  // It should return the index of the first element that matches searchElement
  // It should return -1 if not matches are found.
  // It should accept fromIndex as a number as the third and optional argument.
  // If fromIndex is greater than or equal to array.length it should return -1 (array should not be searched).
  // If fromIndex is provided, it should begin the search at this index.
  // If fromIndex is a negative number, it should be taken as the offset from the end of the array.
  // If fromIndex is 0, then the whole array should be searched.
  // If fromIndex is not provided, the entire array should be searched.
  // It should skip unassigned indices.


// This is where the function will go.

function indexOf(array, searchElement, fromIndex){
  var fromIndex;
  var indexNotFound = -1;
  var indexOutOfRange = -1;

  // makes index a positive number
  if (fromIndex < 0) {
    fromIndex = array.length +(fromIndex)
  }

  if (fromIndex) {
    fromIndex = fromIndex
  } else {
    fromIndex = 0;
  }

  if (fromIndex >= array.length){
    return indexOutOfRange;
  }

  for (fromIndex; fromIndex < array.length; fromIndex++){
    if (fromIndex in array && array[fromIndex] === searchElement){
      return fromIndex;
    }
  }
  return indexNotFound;
}

// This is where the tests will go.

tests({

  'It should be a function.': function(){
    indexOf([1]);
    eq(typeof indexOf, "function");
  },

  'It should accept an array as its first argument.': function(){
    var originalArray = [];
    indexOf(originalArray);
    eq(Array.isArray(originalArray), true);
  },

  'It should accept searchElement as a string for its second argument.': function(){
    var searchElement = "Grant";
    indexOf(["Grant"], searchElement);
    eq(typeof searchElement, "string");
  },

  'It should accept searchElement as a number for its second argument.': function(){
    var searchElement = 0;
    indexOf([0], searchElement);
    eq(typeof searchElement, "number");
  },

  'It should accept searchElement as a boolean for its second argument.': function(){
    var searchElement = true;
    indexOf([true, false], searchElement);
    eq(typeof searchElement, "boolean");
  },

  'It should accept searchElement as an array for its second argument.': function(){
    var searchElement = [1];
    indexOf([[1],[2]], searchElement);
    eq(searchElement instanceof Array, true);
  },

  'It should return the index of the first element that matches searchElement': function(){
    var originalArray = [5,6,7];
    var searchElement = 7;
    var returnValueOfIndexOf = indexOf(originalArray, searchElement);
    eq(returnValueOfIndexOf, 2);
  },

  'It should return -1 if not matches are found.': function(){
    var originalArray = [1,2,3];
    var searchElement = 7;
    var returnValueOfIndexOf = indexOf(originalArray, searchElement);
    eq(returnValueOfIndexOf, -1);
  },

  'It should accept fromIndex as a number as the third and optional argument.': function(){
    var fromIndex = 0;
    indexOf([1], 1, fromIndex);
    eq(typeof fromIndex, "number");
  },

  'If fromIndex is greater than or equal to array.length it should return -1 (array should not be searched).': function(){
    var array = [0,1,2];
    var searchElement = 0;
    var fromIndex = 3;
    var returnValueOfIndexOf = indexOf(array, searchElement, fromIndex);
    eq(returnValueOfIndexOf, -1);
  },

  'If fromIndex is provided, it should begin the search at this index.': function(){
    var array = [0,1,2];
    var searchElement = 0;
    var fromIndex = 1;
    var returnValueOfIndexOf = indexOf(array, searchElement, fromIndex);
    eq(returnValueOfIndexOf, -1);
  },

  'If fromIndex is a negative number, it should be taken as the offset from the end of the array.': function(){
    var array = [0,1,2];
    var searchElement = 1;
    var fromIndex = -2;
    var returnValueOfIndexOf = indexOf(array, searchElement, fromIndex);
    eq(returnValueOfIndexOf, 1);
  },

  'If fromIndex is 0, then the whole array should be searched.': function(){
    var originalArray = [5,6,7];
    var searchElement = 7;
    var fromIndex = 0;
    var returnValueOfIndexOf = indexOf(originalArray, searchElement, fromIndex);
    eq(returnValueOfIndexOf, 2);
  },

  'If fromIndex is not provided, the entire array should be searched.': function(){
    var originalArray = [5,6,7];
    var searchElement = 7;
    var returnValueOfIndexOf = indexOf(originalArray, searchElement);
    eq(returnValueOfIndexOf, 2);
  },

  'It should skip unassigned indices.': function(){
    var originalArray = [1,,2];
    var searchElement = undefined;
    var returnValueOfIndexOf = indexOf(originalArray, searchElement);
    eq(returnValueOfIndexOf, -1);
  }
  
});

</script>
